<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style media="screen">
      canvas {
        border: 1px solid black;
        display: flex;
        margin: auto;
        background-image: url('assets/background.png');
        background-size: 150%;
        background-position: bottom;

      }
    </style>
    <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', () => {

      let canvas = document.getElementById('canvas');
      let ctx = canvas.getContext('2d');


      const anthonyCharImg = new Image();
      anthonyCharImg.src = 'assets/rondsprite.png';

      class Player {
        constructor(options) {
          this.context = options.context,
          this.width = options.width,
          this.height = options.height,
          this.image = options.image,
          this.dx = this.context.canvas.width - 1000,
          this.dy = this.context.canvas.height / 2,
          this.numberOfFrames = options.numberOfFrames || 1;
          this.frameIndex = 0;
          this.spriteAnimationCounter = 0;
        }

        update() {

        }



        draw(keyCode) {
          this.context.clearRect(this.dx, this.dy, this.width / this.numberOfFrames, this.height / 6);

          let frameWidth = this.width / 8;
          let frameHeight = this.height / 6;

          let animationSelector = 0; // draw right

          switch(keyCode) {
            case 37:  // left
              this.dx -= 10;
              break;
            case 39: // right
              this.dx += 10;
              break;
            // case 68: //d jump
            case 83: //s punch
              animationSelector = 2;
              break;
            case 65: //a block
              animationSelector = 3;
              break;
          }

          let animationMod = 0;

          this.context.drawImage(
            this.image,
            this.frameIndex * this.width / this.numberOfFrames, // source x
            animationSelector * frameHeight, //source y
            frameWidth, //source width
            frameHeight, // source height
            this.dx, // destination x
            this.dy, // destination y
            this.width / this.numberOfFrames, // destination width
            this.height / 6 // destination height
          );
        }

        render() {
          this.image.onload = () => {
            this.context.drawImage(
              this.image,
              this.frameIndex * this.width / this.numberOfFrames, // source x
              0, //source y
              this.width / this.numberOfFrames, //source width
              this.height / 6, // source height
              this.dx, // destination x
              this.dy, // destination y
              this.width / this.numberOfFrames, // destination width
              this.height / 6 // destination height
            );
          }
        }

      }



      const anthonyCharOptions = {
        context: ctx,
        width: 3197,
        height: 1994,
        image: anthonyCharImg,
        numberOfFrames: 8
      }

      const anthony = new Player (anthonyCharOptions);
      anthony.render();


      document.addEventListener('keydown', (e) => {
        anthony.draw(e.keyCode)
      })


    })

    </script>
  </head>
  <body>
    <canvas id="canvas" width="1035" height="700"></canvas>
  </body>
</html>
